/*
* ƒанный макрос используетс€ дл€ проверки окончани€ строки диспле€
* и если закончиласть, то перемещает курсор на начало следующей строки
* »спользует регистр r23, r24, r25
*/
HD44780U_Address_DDRAM_Increment:
	
	//mov r23, r25

	READ_REG HD44780U_Address_DDRAM, r25		; выгружаем HD44780U_Address_DDRAM в r25

	inc r25										; увеличиваем r25 на 1

	#ifdef HD44780U_LCD_2x16
		cpi r25, $10							; сравниваем r25 с 16
		brne row2								; если не равны, то переходим

		row1:
			HD44780U_Set_Cursor 2, 1			; устанавливаем курсор на вторую строку на первый символ
			//pop r19							; выталкиваем r25 из STACK
			ret									; выходим из подпрограммы

		row2:
			cpi r25, $50						; сравниваем r25 с 80
			brne finish							; если не равны, то переходим
			HD44780U_Set_Cursor 1, 1			; устанавливаем курсор на первую строку на первый символ
			//pop r19								; выталкиваем r25 из STACK
			ret									; выходим из подпрограммы

	#elif defined HD44780U_LCD_Size_4x20
		cpi r25, $14							; сравниваем r25 с 20
		brne row2								; если не равны, то переходим

		row1:
			HD44780U_Set_Cursor 2, 1			; устанавливаем курсор на вторую строку на первый символ
			//pop r19								; выталкиваем r25 из STACK
			ret									; выходим из подпрограммы

		row2:
			cpi r25, $54						; сравниваем r25 с 84
			brne row3							; если не равны, то переходим
			HD44780U_Set_Cursor 3, 1			; устанавливаем курсор на третью строку на первый символ
			//pop r19								; выталкиваем r25 из STACK
			ret									; выходим из подпрограммы

		row3:
			cpi r25, $28						; сравниваем r25 с 40
			brne row4							; если не равны, то переходим
			HD44780U_Set_Cursor 4, 1			; устанавливаем курсор на четвертую строку на первый символ
			//pop r19								; выталкиваем r25 из STACK
			ret									; выходим из подпрограммы

		row4:
			cpi r25, $68						; сравниваем r25 с 104
			brne finish							; если не равны, то переходим
			HD44780U_Set_Cursor 1, 1			; устанавливаем курсор на первую строку на первый символ
			//pop r19								; выталкиваем r25 из STACK
			ret									; выходим из подпрограммы

	#endif

	finish:
		WRITE_REG HD44780U_Address_DDRAM, r25	; загружаем r16 в HD44780U_Address_DDRAM
ret												; выходим из подпрограммы 
